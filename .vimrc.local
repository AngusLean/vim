" This file will be loaded at the end of .vimrc.
" This file is designed to add your own vim scripts or override the exVim's .vimrc settings.

set foldenable                                        "å¯ç”¨æŠ˜å 
set foldmethod=indent                                 "indent æŠ˜å æ–¹å¼
set breakindent                                   "vim8ä¸­åŠ å…¥çš„å¤åˆ¶å†…å®¹ä¿æŒç¼©è¿›
noremap <c-k> <c-w>k
noremap <c-j> <c-w>j
noremap <c-h> <c-w>h
noremap <c-l> <c-w>l
nnoremap ; :
noremap Q q
noremap Qa qa
set matchpairs=(:),{:},[:],<:>   "åŒ¹é…æ‹¬å·çš„è§„åˆ™ã€‚"
" set mouse=a                    " åœ¨ä»»ä½•æ¨¡å¼ä¸‹å¯ç”¨é¼ æ ‡
" set autoread

if g:isGUI
    set guioptions-=m
    set guioptions-=T
    set guioptions-=r
    set guioptions-=L
    nmap <silent> <c-F11> :if &guioptions =~# 'm' <Bar>
                \set guioptions-=m <Bar>
                \set guioptions-=T <Bar>
                \set guioptions-=r <Bar>
                \set guioptions-=L <Bar>
                \else <Bar>
                \set guioptions+=m <Bar>
                \set guioptions+=T <Bar>
                \set guioptions+=r <Bar>
                \set guioptions+=L <Bar>
                \endif<CR>
endif


" escalt.vim    æ§åˆ¶å°ä¸‹è®©ç”¨ <M-x> ä¹Ÿå¯ç”¨
" Author:       lilydjwg <lilydjwg@gmail.com>
" ---------------------------------------------------------------------
" Load Once:
if &cp || exists("g:loaded_escalt") || has("gui_running") || has("win32") || has("win64")
  finish
endif
let s:keepcpo = &cpo
let g:loaded_escalt = 1
set cpo&vim
" ---------------------------------------------------------------------
" Functions:
function Escalt_console()
  for i in range(48, 57) + range(65, 90) + range(97, 122)
    exe "set <M-".nr2char(i).">=\<Esc>".nr2char(i)
  endfor
  " 10, 22, 34, 62, 124 can't be set
  set <M-,>=,
  set <M-.>=.
  set ttimeoutlen=50
  " xterm keys, may also work in tmux with xterm-keys on
  set <F1>=OP
  set <F2>=OQ
  set <F3>=OR
  set <F4>=OS
  set <Home>=OH
  set <End>=OF
  set <S-Delete>=[3;2~
  if exists("$TMUX")
    set <S-F1>=[1;2P
    set <S-F2>=[1;2Q
    set <S-F3>=[1;2R
    set <S-F4>=[1;2S
    set <S-F5>=[15;2~
    set <S-F6>=[17;2~
    set <S-F7>=[18;2~
    set <S-F8>=[19;2~
    set <S-F9>=[20;2~
    set <S-F10>=[21;2~
    set <S-F11>=[23;2~
    set <S-F12>=[24;2~
    set <Home>=[1~
    set <End>=[4~
    " In xterm and tmux
    " 2 & 3 are Ins and Del, 5 & 6 are PgUp and PgDn
  elseif &term == 'linux'
    " Linux console keys, only S-F3 & S-F5 actually works
    " set <S-F1>=[25~
    " set <S-F2>=[26~
    set <S-F3>=[28~
    " set <S-F4>=[29~
    set <S-F5>=[31~
    " set <S-F6>=[32~
    " set <S-F7>=[33~
    " set <S-F8>=[34~
  else
    set <S-F1>=O1;2P
    set <S-F2>=O1;2Q
    set <S-F3>=O1;2R
    set <S-F4>=O1;2S
  endif
endfunction
" ---------------------------------------------------------------------
" Call Functions:
if !has('nvim')
  call Escalt_console()
endif
" ---------------------------------------------------------------------
" Restoration And Modelines:
let &cpo= s:keepcpo
unlet s:keepcpo
" vim:fdm=expr:fde=getline(v\:lnum-1)=~'\\v"\\s*-{20,}'?'>1'\:1


" ç”¨ç©ºæ ¼é”®æ¥å¼€å…³æŠ˜å 
"  <space> @=((foldclosed(line('.')) < 0) ? 'zc' : 'zo')<CR>
" let javascript_enable_domhtmlcss=1 "è®¾ç½®javascriptè¯­æ³•é«˜äº®æ–‡ä»¶æ”¯æŒDOMçš„é«˜äº®"

" è®¾ç½®å­—ä½“
" set guifont=YaHei\ Consolas\ Hybrid\ 12

"å…‰æ ‡ä¸é—ªçƒ
""set gcr=a:block-blinkon0


"-----------------------------------------------------------------------------"
" -----------------------------------------------------------------------------
"  < ç¼–è¯‘ã€è¿æ¥ã€è¿è¡Œé…ç½® (ç›®å‰åªé…ç½®äº†Cã€C++ã€Javaè¯­è¨€)>
" -----------------------------------------------------------------------------

"autocmd FileType python nmap <F6> :call RunWith("py -3")<cr>

" F9 ä¸€é”®ä¿å­˜ã€ç¼–è¯‘ã€è¿æ¥å­˜å¹¶è¿è¡Œ
nmap <F9> :call Run()<CR>
imap <F9> <ESC>:call Run()<CR>

" Ctrl + F9 ä¸€é”®ä¿å­˜å¹¶ç¼–è¯‘
nmap <c-F9> :call Compile()<CR>
imap <c-F9> <ESC>:call Compile()<CR>

" Ctrl + F10 ä¸€é”®ä¿å­˜å¹¶è¿æ¥
nmap <c-F10> :call Link()<CR>
imap <c-F10> <ESC>:call Link()<CR>

let s:LastShellReturn_C = 0
let s:LastShellReturn_L = 0
let s:ShowWarning = 1
let s:Obj_Extension = '.o'
let s:Exe_Extension = '.exe'
let s:Class_Extension = '.class'
let s:Sou_Error = 0

let s:windows_CFlags = 'gcc\ -fexec-charset=gbk\ -Wall\ -g\ -O0\ -c\ %\ -o\ %<.o'
let s:linux_CFlags = 'gcc\ -Wall\ -g\ -O0\ -c\ %\ -o\ %<.o'

let s:windows_CPPFlags = 'clang++\ -Wall\ -g\ -O0\ -c\ %\ -o\ %<.o'
" let s:windows_CPPFlags = 'g++\ -fexec-charset=gbk\ -Wall\ -g\ -O0\ -c\ %\ -o\ %<.o'

let s:linux_CPPFlags = 'g++\ -Wall\ -g\ -O0\ -c\ %\ -o\ %<.o'

let s:JavaFlags = 'javac\ %'

function RunWith (command)
  execute "w"
  exe ":ccl"
  " cleanæ˜¯åœ¨linuxä¸‹çš„å‘½ä»¤
"  execute "!clear;time " . a:command . " " . expand("%")
  execute "!" . a:command . " " . expand("%")
endfunction

func! Compile()
    exe ":ccl"
    exe ":update"
    let s:Sou_Error = 0
    let s:LastShellReturn_C = 0
    let Sou = expand("%:p")
    let v:statusmsg = ''
    if expand("%:e") == "c" || expand("%:e") == "cpp" || expand("%:e") == "cxx"
        let Obj = expand("%:p:r").s:Obj_Extension
        let Obj_Name = expand("%:p:t:r").s:Obj_Extension
        if !filereadable(Obj) || (filereadable(Obj) && (getftime(Obj) < getftime(Sou)))
            redraw!
            if expand("%:e") == "c"
                if g:iswindows
                    exe ":setlocal makeprg=".s:windows_CFlags
                else
                    exe ":setlocal makeprg=".s:linux_CFlags
                endif
                echohl WarningMsg | echo " compiling..."
                silent make
            elseif expand("%:e") == "cpp" || expand("%:e") == "cxx"
                if g:iswindows
                    exe ":setlocal makeprg=".s:windows_CPPFlags
                else
                    exe ":setlocal makeprg=".s:linux_CPPFlags
                endif
                echohl WarningMsg | echo " compiling..."
                silent make
            endif
            redraw!
            if v:shell_error != 0
                let s:LastShellReturn_C = v:shell_error
            endif
            if g:iswindows
                if s:LastShellReturn_C != 0
                    exe ":bo cope"
                    echohl WarningMsg | echo " compilation failed"
                else
                    if s:ShowWarning
                        exe ":bo cw"
                    endif
                    echohl WarningMsg | echo " compilation successful"
                endif
            else
                if empty(v:statusmsg)
                    echohl WarningMsg | echo " compilation successful"
                else
                    exe ":bo cope"
                endif
            endif
        else
            echohl WarningMsg | echo ""Obj_Name"is up to date"
        endif
    elseif expand("%:e") == "java"
        let class = expand("%:p:r").s:Class_Extension
        let class_Name = expand("%:p:t:r").s:Class_Extension
        if !filereadable(class) || (filereadable(class) && (getftime(class) < getftime(Sou)))
            redraw!
            exe ":setlocal makeprg=".s:JavaFlags
            echohl WarningMsg | echo " compiling..."
            silent make
            redraw!
            if v:shell_error != 0
                let s:LastShellReturn_C = v:shell_error
            endif
            if g:iswindows
                if s:LastShellReturn_C != 0
                    exe ":bo cope"
                    echohl WarningMsg | echo " compilation failed"
                else
                    if s:ShowWarning
                        exe ":bo cw"
                    endif
                    echohl WarningMsg | echo " compilation successful"
                endif
            else
                if empty(v:statusmsg)
                    echohl WarningMsg | echo " compilation successful"
                else
                    exe ":bo cope"
                endif
            endif
        else
            echohl WarningMsg | echo ""class_Name"is up to date"
        endif
    else
        let s:Sou_Error = 1
        echohl WarningMsg | echo " please choose the correct source file"
    endif
    exe ":setlocal makeprg=make"
endfunc

func! Link()
    call Compile()
    if s:Sou_Error || s:LastShellReturn_C != 0
        return
    endif
    if expand("%:e") == "c" || expand("%:e") == "cpp" || expand("%:e") == "cxx"
        let s:LastShellReturn_L = 0
        let Sou = expand("%:p")
        let Obj = expand("%:p:r").s:Obj_Extension
        if g:iswindows
            let Exe = expand("%:p:r").s:Exe_Extension
            let Exe_Name = expand("%:p:t:r").s:Exe_Extension
        else
            let Exe = expand("%:p:r")
            let Exe_Name = expand("%:p:t:r")
        endif
        let v:statusmsg = ''
        if filereadable(Obj) && (getftime(Obj) >= getftime(Sou))
            redraw!
            if !executable(Exe) || (executable(Exe) && getftime(Exe) < getftime(Obj))
                if expand("%:e") == "c"
                    setlocal makeprg=gcc\ -o\ %<\ %<.o
                    echohl WarningMsg | echo " linking..."
                    silent make
                elseif expand("%:e") == "cpp" || expand("%:e") == "cxx"
                    setlocal makeprg=g++\ -o\ %<\ %<.o
                    echohl WarningMsg | echo " linking..."
                    silent make
                endif
                redraw!
                if v:shell_error != 0
                    let s:LastShellReturn_L = v:shell_error
                endif
                if g:iswindows
                    if s:LastShellReturn_L != 0
                        exe ":bo cope"
                        echohl WarningMsg | echo " linking failed"
                    else
                        if s:ShowWarning
                            exe ":bo cw"
                        endif
                        echohl WarningMsg | echo " linking successful"
                    endif
                else
                    if empty(v:statusmsg)
                        echohl WarningMsg | echo " linking successful"
                    else
                        exe ":bo cope"
                    endif
                endif
            else
                echohl WarningMsg | echo ""Exe_Name"is up to date"
            endif
        endif
        setlocal makeprg=make
    elseif expand("%:e") == "java"
        return
    endif
endfunc

func! Run()
" ä¸éœ€è¦ç¼–è¯‘çš„è§£é‡Šå‹è„šæœ¬è¯­è¨€
    "pythoné»˜è®¤ä¸ºpython3
    if expand("%:e") == "py"
        call RunWith("py -3")
        return
    elseif expand("%:e") == 'vbs'
        execute "w"
        exe ":ccl"
        execute "!" . expand("%")
        return
    endif
" éœ€è¦ç¼–è¯‘çš„è¯­è¨€ã€‚ C/C++/Java
    let s:ShowWarning = 0
    call Link()
    let s:ShowWarning = 1
    if s:Sou_Error || s:LastShellReturn_C != 0 || s:LastShellReturn_L != 0
        return
    endif
    let Sou = expand("%:p")
    if expand("%:e") == "c" || expand("%:e") == "cpp" || expand("%:e") == "cxx"
        let Obj = expand("%:p:r").s:Obj_Extension
        if g:iswindows
            let Exe = expand("%:p:r").s:Exe_Extension
        else
            let Exe = expand("%:p:r")
        endif
        if executable(Exe) && getftime(Exe) >= getftime(Obj) && getftime(Obj) >= getftime(Sou)
            redraw!
            echohl WarningMsg | echo " running..."
            if g:iswindows
                exe ":!%<.exe"
            else
                if g:isGUI
                    exe ":!gnome-terminal -x bash -c './%<; echo; echo è¯·æŒ‰ Enter é”®ç»§ç»­; read'"
                else
                    exe ":!clear; ./%<"
                endif
            endif
            redraw!
            echohl WarningMsg | echo " running finish"
        endif
    elseif expand("%:e") == "java"
        let class = expand("%:p:r").s:Class_Extension
        if getftime(class) >= getftime(Sou)
            redraw!
            echohl WarningMsg | echo " running..."
            if g:iswindows
                exe ":!java %<"
            else
                if g:isGUI
                    exe ":!gnome-terminal -x bash -c 'java %<; echo; echo è¯·æŒ‰ Enter é”®ç»§ç»­; read'"
                else
                    exe ":!clear; java %<"
                endif
            endif
            redraw!
            echohl WarningMsg | echo " running finish"
        endif
    endif
endfunc
"-----------------------------------------------------------------------------"


" -----------------------------------------------------------------------------
"  < åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆ Html æˆ– PHP æ–‡ä»¶ >
" -----------------------------------------------------------------------------
" ä¿®æ”¹å‰è¯·å…ˆé€šè¯»æ­¤æ¨¡å—ï¼Œæ˜ç™½äº†å†æ”¹ä»¥é¿å…é”™è¯¯

" F5 åŠ æµè§ˆå™¨åç§°ç¼©å†™è°ƒç”¨æµè§ˆå™¨é¢„è§ˆï¼Œå¯ç”¨å‰å…ˆç¡®å®šæœ‰å®‰è£…ç›¸åº”æµè§ˆå™¨ï¼Œå¹¶åœ¨ä¸‹é¢çš„é…ç½®å¥½å…¶å®‰è£…ç›®å½•
if g:iswindows
    "ä»¥ä¸‹ä¸ºåªæ”¯æŒWindowsç³»ç»Ÿçš„æµè§ˆå™¨

    " è°ƒç”¨ç³»ç»ŸIEæµè§ˆå™¨é¢„è§ˆï¼Œå¦‚æœå·²å¸è½½å¯å°†å…¶æ³¨é‡Š
    nmap <F5>ie :call ViewInBrowser("ie")<cr>
    imap <F5>ie <ESC>:call ViewInBrowser("ie")<cr>

    " è°ƒç”¨IETester(IEæµ‹è¯•å·¥å…·)é¢„è§ˆï¼Œå¦‚æœæœ‰å®‰è£…å¯å–æ¶ˆæ³¨é‡Š
    " nmap <F5>ie6 :call ViewInBrowser("ie6")<cr>
    " imap <F5>ie6 <ESC>:call ViewInBrowser("ie6")<cr>
    " nmap <F5>ie7 :call ViewInBrowser("ie7")<cr>
    " imap <F5>ie7 <ESC>:call ViewInBrowser("ie7")<cr>
    " nmap <F5>ie8 :call ViewInBrowser("ie8")<cr>
    " imap <F5>ie8 <ESC>:call ViewInBrowser("ie8")<cr>
    " nmap <F5>ie9 :call ViewInBrowser("ie9")<cr>
    " imap <F5>ie9 <ESC>:call ViewInBrowser("ie9")<cr>
    " nmap <F5>ie10 :call ViewInBrowser("ie10")<cr>
    " imap <F5>ie10 <ESC>:call ViewInBrowser("ie10")<cr>
    " nmap <F5>iea :call ViewInBrowser("iea")<cr>
    " imap <F5>iea <ESC>:call ViewInBrowser("iea")<cr>
elseif g:islinux
    "ä»¥ä¸‹ä¸ºåªæ”¯æŒLinuxç³»ç»Ÿçš„æµè§ˆå™¨
    "æš‚æœªé…ç½®ï¼Œå¾…æœ‰æ—¶é—´å†å¼„äº†
endif

"ä»¥ä¸‹ä¸ºæ”¯æŒWindowsä¸Linuxç³»ç»Ÿçš„æµè§ˆå™¨

" è°ƒç”¨Firefoxæµè§ˆå™¨é¢„è§ˆï¼Œå¦‚æœæœ‰å®‰è£…å¯å–æ¶ˆæ³¨é‡Š
nmap <F5>ff :call ViewInBrowser("ff")<cr>
imap <F5>ff <ESC>:call ViewInBrowser("ff")<cr>

" è°ƒç”¨Maxthon(é¨æ¸¸)æµè§ˆå™¨é¢„è§ˆï¼Œå¦‚æœæœ‰å®‰è£…å¯å–æ¶ˆæ³¨é‡Š
" nmap <F5>ay :call ViewInBrowser("ay")<cr>
" imap <F5>ay <ESC>:call ViewInBrowser("ay")<cr>

" è°ƒç”¨Operaæµè§ˆå™¨é¢„è§ˆï¼Œå¦‚æœæœ‰å®‰è£…å¯å–æ¶ˆæ³¨é‡Š
" nmap <F5>op :call ViewInBrowser("op")<cr>
" imap <F5>op <ESC>:call ViewInBrowser("op")<cr>

" è°ƒç”¨Chromeæµè§ˆå™¨é¢„è§ˆï¼Œå¦‚æœæœ‰å®‰è£…å¯å–æ¶ˆæ³¨é‡Š
" nmap <F5>cr :call ViewInBrowser("cr")<cr>
" imap <F5>cr <ESC>:call ViewInBrowser("cr")<cr>

" æµè§ˆå™¨è°ƒç”¨å‡½æ•°
function! ViewInBrowser(name)
    if expand("%:e") == "php" || expand("%:e") == "html"
        exe ":update"
        if g:iswindows
            "è·å–è¦é¢„è§ˆçš„æ–‡ä»¶è·¯å¾„ï¼Œå¹¶å°†è·¯å¾„ä¸­çš„'\'æ›¿æ¢ä¸º'/'ï¼ŒåŒæ—¶å°†è·¯å¾„æ–‡å­—çš„ç¼–ç è½¬æ¢ä¸ºgbkï¼ˆåŒcp936ï¼‰
            let file = iconv(substitute(expand("%:p"), '\', '/', "g"), "utf-8", "gbk")

            "æµè§ˆå™¨è·¯å¾„è®¾ç½®ï¼Œè·¯å¾„ä¸­ä½¿ç”¨'/'æ–œæ ï¼Œæ›´æ”¹è·¯å¾„è¯·æ›´æ”¹åŒå¼•å·é‡Œçš„å†…å®¹
            "ä¸‹é¢åªå¯ç”¨äº†ç³»ç»ŸIEæµè§ˆå™¨ï¼Œå¦‚éœ€å¯ç”¨å…¶å®ƒçš„å¯å°†å…¶å–æ¶ˆæ³¨é‡Šï¼ˆå¾—å…ˆå®‰è£…ï¼Œå¹¶é…ç½®å¥½å®‰è£…è·¯å¾„ï¼‰ï¼Œä¹Ÿå¯æŒ‰éœ€å¢å‡
            let SystemIE = "C:/progra~1/intern~1/iexplore.exe"  "ç³»ç»Ÿè‡ªå¸¦IEç›®å½•
            " let IETester = "F:/IETester/IETester.exe"           "IETesterç¨‹åºç›®å½•ï¼ˆå¯æŒ‰å®é™…æ›´æ”¹ï¼‰
            " let Chrome = "F:/Chrome/Chrome.exe"                 "Chromeç¨‹åºç›®å½•ï¼ˆå¯æŒ‰å®é™…æ›´æ”¹ï¼‰
            let Firefox = "D:/DevelopTool/ffdevelop/firefox.exe"              "Firefoxç¨‹åºç›®å½•ï¼ˆå¯æŒ‰å®é™…æ›´æ”¹ï¼‰
            " let Opera = "F:/Opera/opera.exe"                    "Operaç¨‹åºç›®å½•ï¼ˆå¯æŒ‰å®é™…æ›´æ”¹ï¼‰
            " let Maxthon = "C:/Progra~2/Maxthon/Bin/Maxthon.exe" "Maxthonç¨‹åºç›®å½•ï¼ˆå¯æŒ‰å®é™…æ›´æ”¹ï¼‰

            "æœ¬åœ°è™šæ‹ŸæœåŠ¡å™¨è®¾ç½®ï¼Œæˆ‘æµ‹è¯•çš„æ˜¯phpStudy2014ï¼Œå¯æ ¹æ®è‡ªå·±çš„ä¿®æ”¹ï¼Œæ›´æ”¹è·¯å¾„è¯·æ›´æ”¹åŒå¼•å·é‡Œçš„å†…å®¹
            let htdocs ="F:/phpStudy2014/WWW/"                  "è™šæ‹ŸæœåŠ¡å™¨åœ°å€æˆ–ç›®å½•ï¼ˆå¯æŒ‰å®é™…æ›´æ”¹ï¼‰
            let url = "localhost"                               "è™šæ‹ŸæœåŠ¡å™¨ç½‘å€ï¼ˆå¯æŒ‰å®é™…æ›´æ”¹ï¼‰
        elseif g:islinux
            "æš‚æ—¶è¿˜æ²¡æœ‰é…ç½®ï¼Œæœ‰æ—¶é—´å†å¼„äº†ã€‚
        endif

        "æµè§ˆå™¨è°ƒç”¨ç¼©å†™ï¼Œå¯æ ¹æ®å®é™…å¢å‡ï¼Œæ³¨æ„ï¼Œä¸Šé¢æµè§ˆå™¨è·¯å¾„ä¸­æ²¡æœ‰å®šä¹‰è¿‡çš„å˜é‡ï¼ˆç­‰å·å³è¾¹ä¸ºå˜é‡ï¼‰ä¸èƒ½å‡ºç°åœ¨ä¸‹é¢å“Ÿï¼ˆå¯å°†å…¶æ³¨é‡Šæˆ–åˆ é™¤ï¼‰
        let l:browsers = {}                             "å®šä¹‰ç¼©å†™å­—å…¸å˜é‡ï¼Œæ­¤è¡Œä¸èƒ½åˆ é™¤æˆ–æ³¨é‡Š
        " let l:browsers["cr"] = Chrome                   "Chromeæµè§ˆå™¨ç¼©å†™
        let l:browsers["ff"] = Firefox                  "Firefoxæµè§ˆå™¨ç¼©å†™
        " let l:browsers["op"] = Opera                    "Operaæµè§ˆå™¨ç¼©å†™
        " let l:browsers["ay"] = Maxthon                  "é¨æ¸¸æµè§ˆå™¨ç¼©å†™
        let l:browsers["ie"] = SystemIE                 "ç³»ç»ŸIEæµè§ˆå™¨ç¼©å†™
        " let l:browsers["ie6"] = IETester."-ie6"         "è°ƒç”¨IETESTERå·¥å…·ä»¥IE6é¢„è§ˆç¼©å†™ï¼ˆå˜é‡åŠ å‚æ•°ï¼‰
        " let l:browsers["ie7"] = IETester."-ie7"         "è°ƒç”¨IETESTERå·¥å…·ä»¥IE7é¢„è§ˆç¼©å†™ï¼ˆå˜é‡åŠ å‚æ•°ï¼‰
        " let l:browsers["ie8"] = IETester."-ie8"         "è°ƒç”¨IETESTERå·¥å…·ä»¥IE8é¢„è§ˆç¼©å†™ï¼ˆå˜é‡åŠ å‚æ•°ï¼‰
        " let l:browsers["ie9"] = IETester."-ie9"         "è°ƒç”¨IETESTERå·¥å…·ä»¥IE9é¢„è§ˆç¼©å†™ï¼ˆå˜é‡åŠ å‚æ•°ï¼‰
        " let l:browsers["ie10"] = IETester."-ie10"       "è°ƒç”¨IETESTERå·¥å…·ä»¥IE10é¢„è§ˆç¼©å†™ï¼ˆå˜é‡åŠ å‚æ•°ï¼‰
        " let l:browsers["iea"] = IETester."-al"          "è°ƒç”¨IETESTERå·¥å…·ä»¥æ”¯æŒçš„æ‰€æœ‰IEç‰ˆæœ¬é¢„è§ˆç¼©å†™ï¼ˆå˜é‡åŠ å‚æ•°ï¼‰

        if stridx(file, htdocs) == -1   "æ–‡ä»¶ä¸åœ¨æœ¬åœ°è™šæ‹ŸæœåŠ¡å™¨ç›®å½•ï¼Œåˆ™ç›´æ¥é¢„è§ˆï¼ˆä½†ä¸èƒ½è§£æPHPæ–‡ä»¶ï¼‰
           exec ":silent !start ". l:browsers[a:name] ." file://" . file
        else    "æ–‡ä»¶åœ¨æœ¬åœ°è™šæ‹ŸæœåŠ¡å™¨ç›®å½•ï¼Œåˆ™è°ƒç”¨æœ¬åœ°è™šæ‹ŸæœåŠ¡å™¨è§£æé¢„è§ˆï¼ˆå…ˆå¯åŠ¨æœ¬åœ°è™šæ‹ŸæœåŠ¡å™¨ï¼‰
            let file = substitute(file, htdocs, "http://".url."/", "g")    "è½¬æ¢æ–‡ä»¶è·¯å¾„ä¸ºè™šæ‹ŸæœåŠ¡å™¨ç½‘å€è·¯å¾„
            exec ":silent !start ". l:browsers[a:name] file
        endif
    else
        echohl WarningMsg | echo " please choose the correct source file"
    endif
endfunction


" æ›¿æ¢å‡½æ•°ã€‚å‚æ•°è¯´æ˜ï¼š
" confirmï¼šæ˜¯å¦æ›¿æ¢å‰é€ä¸€ç¡®è®¤
" wholewordï¼šæ˜¯å¦æ•´è¯åŒ¹é…
" replaceï¼šè¢«æ›¿æ¢å­—ç¬¦ä¸²
function! Replace(confirm, wholeword, replace)
    wa
    let flag = ''
    if a:confirm
        let flag .= 'gec'
    else
        let flag .= 'ge'
    endif
    let search = ''
    if a:wholeword
        let search .= '\<' . escape(expand('<cword>'), '/\.*$^~[') . '\>'
    else
        let search .= expand('<cword>')
    endif
    let replace = escape(a:replace, '/\&~')
    execute 'argdo %s/' . search . '/' . replace . '/' . flag . '| update'
endfunction
" ä¸ç¡®è®¤ã€éæ•´è¯
nnoremap <Leader>R :call Replace(0, 0, input('Replace '.expand('<cword>').' with: '))<CR>
" ä¸ç¡®è®¤ã€æ•´è¯
nnoremap <Leader>rw :call Replace(0, 1, input('Replace '.expand('<cword>').' with: '))<CR>
" ç¡®è®¤ã€éæ•´è¯
nnoremap <Leader>rc :call Replace(1, 0, input('Replace '.expand('<cword>').' with: '))<CR>
" ç¡®è®¤ã€æ•´è¯
nnoremap <Leader>rcw :call Replace(1, 1, input('Replace '.expand('<cword>').' with: '))<CR>
nnoremap <Leader>rwc :call Replace(1, 1, input('Replace '.expand('<cword>').' with: '))<CR>
